<!DOCTYPE html>
<html lang="en">

<head>
  <!-- ## for client-side less
  <link rel="stylesheet/less" type="text/css" href="http://astrohckr.github.io/theme/css/style.less">
  <script src="http://cdnjs.cloudflare.com/ajax/libs/less.js/1.7.3/less.min.js" type="text/javascript"></script>
  -->
  <link rel="stylesheet" type="text/css" href="http://astrohckr.github.io/theme/css/style.css">
  <link rel="stylesheet" type="text/css" href="http://astrohckr.github.io/theme/css/pygments.css">
  <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=PT+Sans|PT+Serif|PT+Mono">

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="AJ">
  <meta name="description" content="Posts and writings by AJ">

  <link href="http://astrohckr.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="In which a nerd writes stuff on the internet. Atom" />

<meta name="keywords" content="linux, chromebook">

  <title>
    In which a nerd writes stuff on the internet.
&ndash; Chromebook Chronicles Part 2  </title>

</head>

<body>
  <aside>
    <div id="user_meta">
      <a href="http://astrohckr.github.io">
        <img src="/images/me.jpg" alt="logo">
      </a>
      <h2><a href="http://astrohckr.github.io">AJ</a></h2>
      <p>writes code, prose.</p>
      <ul>
        <li><a href="http://astrohckr.github.io/about/">About</a></li>
        <li><a href="https://github.com/astrohckr" target="_blank">Github</a></li>
        <li><a href="https://bitbucket.org/astrohckr" target="_blank">Bitbucket</a></li>
        <li><a href="https://twitter.com/astrohckr" target="_blank">Twitter</a></li>
      </ul>
    </div>
  </aside>

  <main>
    <header>
      <p>
      <a href="http://astrohckr.github.io">Index</a> &brvbar; <a href="http://astrohckr.github.io/archives.html">Archives</a>
      &brvbar; <a href="http://astrohckr.github.io/feeds/all.atom.xml">Atom</a>
      </p>
    </header>

<article>
  <div class="article_title">
    <h3><a href="http://astrohckr.github.io/posts/chromebook-chronicles-part-2/">Chromebook Chronicles Part 2</a></h3>
  </div>
  <div class="article_text">
    <p>I have been using the Acer C720 Chromebook as a linux laptop for a couple months now.</p>
<h2>SSD Upgrade</h2>
<p>While I'm fairly satisfied with the results, I would not recommend an SSD upgrade from MyDigitalSSD. I have had not 1, but 2 SSD failures from them. I am sadly, hardly alone in this problem.</p>
<p>At the moment, I'm trying out a 256GB Transcend SSD (model MTS400). Only time will tell whether this will be more reliable drive than the MyDigital.</p>
<p>Note: If considering the above, make sure to disable ALPM to resolve SATA power management errors. Read more <a href="https://wiki.archlinux.org/index.php/Solid_State_Drives#Resolving_SATA_power_management_related_errors">here</a>.</p>
<h2>Linux</h2>
<p>While I've taken no less than 3 distributions for a spin (Ubuntu, eOS - aka elementary, Arch Linux), I always go back to <a href="http://archlinux.org">Arch</a>.</p>
<p>This is mostly due to my being somewhat of a control freak when it comes to my computing choices. </p>
<p><a href="http://elementary.io">eOS Freya</a> is a polished, refined distribution, with <a href="http://releases.ubuntu.com/14.04/">Ubuntu 14.04 LTS</a> as its core underpinnings. I like, one can even say, love, that the eOS apps are visually consistent and lightweight. </p>
<p>With Arch, however, I can set up a fairly lightweight system even when using <a href="https://wiki.archlinux.org/index.php/Cinnamon">Cinnamon</a>. </p>
<h2>Installation</h2>
<p>If you're used to Arch, then installation is more or less the same here as it is in the <a href="https://wiki.archlinux.org/index.php/Beginners%27_guide">Beginner's Guide</a>.</p>
<p>NOTE: Install <code>netctl</code> on the <code>arch-chroot</code> step. <code>wpa_supplicant</code> version <code>2.4.1</code> has a bug where you cannot authenticate with WPA, so I would recommend downloading <code>2.3.1</code> from somewhere, like at the <a href="http://seblu.net/a/arm/packages/w/wpa_supplicant/">Arch Rollback Machine</a>, so install it manually.</p>
<p>You can simply download it to the chroot-ed system with <code>wget http://seblu.net/a/arm/packages/w/wpa_supplicant/wpa_supplicant-2.3-1-x86_64.pkg.tar.xz</code>.</p>
<p>And then install: <code>pacman -U wpa_supplicant-2.3-1-x86_64.pkg.tar.xz</code>. </p>
<h2>Tweaks</h2>
<p>Here are the tweaks I made on setup:</p>
<h3>SSD optimization</h3>
<p>My <code>/etc/fstab</code> looks more or less like this:</p>
<div class="highlight"><pre>/dev/sda1           /boot  ext2  defaults,relatime,stripe=4                 0 2
/dev/sda2           /      ext4  defaults,noatime,discard,data=writeback    0 1
/dev/mapper/home    /home  ext4  defaults,noatime,discard,data=ordered      0 2
</pre></div>


<p><code>/dev/mapper/home</code> maps to the encrypted <code>/home</code> partition that I set up on installation.</p>
<p><code>discard</code> and <code>data</code> in the options is to enable <code>TRIM</code> on the SSD. </p>
<h3>Fixing suspend/resume</h3>
<p><a href="https://wiki.archlinux.org/index.php/Chrome_OS_devices#With_kernel_parameters">With kernel parameters</a></p>
<p>As of this writing, kernel 4.0 hasn't yet reached <code>core</code>, so I did have to add this to <code>/etc/default/grub</code>:</p>
<div class="highlight"><pre>GRUB_CMDLINE_LINUX_DEFAULT=&quot;tpm_tis.interrupts=0 modprobe.blacklist=ehci_pci&quot;
</pre></div>


<h3>TLP for Power Management</h3>
<p><a href="https://wiki.archlinux.org/index.php/TLP">TLP</a></p>
<p>I modified specific configurations in <code>/etc/default/tlp</code>:</p>
<p>Here is one:</p>
<div class="highlight"><pre>DISK_IDLE_SECS_ON_AC=0
DISK_IDLE_SECS_ON_BAT=0
</pre></div>


<p>CPU Frequency:</p>
<div class="highlight"><pre>CPU_SCALING_GOVERNOR_ON_AC=performance
CPU_SCALING_GOVERNOR_ON_BAT=ondemand
</pre></div>


<p>TO disable aggressive SATA powermanagement due to a bug in my SSD:</p>
<div class="highlight"><pre>SATA_LINKPWR_ON_AC=max_performance
SATA_LINKPWR_ON_BAT=max_performance
</pre></div>


<h3>Touchpad</h3>
<p><a href="https://wiki.archlinux.org/index.php/Chrome_OS_devices#Chromium_OS_input_drivers">Chromium OS input drivers</a></p>
<p>I installed <a href="https://aur.archlinux.org/packages/xf86-input-cmt-xorg/">these</a> input drivers rather than go with synaptics since it appears to work better.</p>
<h3>Modules</h3>
<p>The only real changes I've made is in <code>/etc/modprobe.d/ath9k.conf</code>:</p>
<div class="highlight"><pre>options ath9k btcoex_enable=1 bt_ant_diversity=1 ps_enable=0
</pre></div>


<p>This is to enable bluetooth and wifi coexistence.</p>
<p>Power saving can also be enabled by setting the <code>ps_enable=1</code> flag, but according to the Arch wiki there are system freezes associated with that. </p>
<h3>zram</h3>
<p><a href="https://wiki.archlinux.org/index.php/Maximizing_performance#Zram_or_zswap">Zram or zswap setup</a></p>
<p><a href="https://www.kernel.org/doc/Documentation/blockdev/zram.txt">zram</a> is a kernel module with which you can replace swap partitions for faster performance. </p>
<h3>Preload</h3>
<p><a href="https://wiki.archlinux.org/index.php/Preload#Go-preload">Go-preload</a></p>
<p>This was mostly to speed up performance for Firefox and Chrome, though lately I've been using Opera more as it seems far more lean than either Chrome or Firefox.</p>
<h2>That's it for now.</h2>
<p>Time will tell how well this setup will go. My next project is to do this on my rMBP, which currently is running Mavericks (due to Yosemite issues).</p>
  </div>
  <div class="article_meta">
    <p>Posted on: Tue 28 April 2015</p>
    <p>Category: <a href="http://astrohckr.github.io/category/posts.html">posts</a>
 &ndash; Tags:
      <a href="http://astrohckr.github.io/tag/linux/">linux</a>,      <a href="http://astrohckr.github.io/tag/chromebook/">chromebook</a>    </p>
  </div>

  <div id="article_comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_identifier = "posts/chromebook-chronicles-part-2/";
        (function() {
             var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
             dsq.src = 'http://astrohckr.disqus.com/embed.js';
             (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
         })();
    </script>
  </div>

</article>


    <div id="ending_message">
      <p>&copy; AJ. Built using <a href="http://getpelican.com" target="_blank">Pelican</a>. Theme by Giulio Fidente on <a href="https://github.com/gfidente/pelican-svbhack" target="_blank">github</a>. </p>
    </div>
  </main>
</body>
</html>